(this["webpackJsonpagilitious-client"]=this["webpackJsonpagilitious-client"]||[]).push([[0],{127:function(e,a,t){e.exports=t.p+"static/media/bird.87ace9d5.svg"},128:function(e,a,t){e.exports=t.p+"static/media/bird-2.2a95e580.svg"},129:function(e,a,t){e.exports=t.p+"static/media/chicken.c04ddbb9.svg"},130:function(e,a,t){e.exports=t.p+"static/media/fox.c66a825a.svg"},131:function(e,a,t){e.exports=t.p+"static/media/hedgehog.0b7b275b.svg"},132:function(e,a,t){e.exports=t.p+"static/media/rabbit.fd0a14cc.svg"},133:function(e,a,t){e.exports=t.p+"static/media/squirrel.57ea8deb.svg"},142:function(e,a,t){e.exports=t(323)},147:function(e,a,t){},148:function(e,a,t){},168:function(e,a,t){},169:function(e,a,t){},170:function(e,a,t){},171:function(e,a,t){},317:function(e,a,t){},318:function(e,a,t){},319:function(e,a,t){},321:function(e,a,t){},322:function(e,a,t){},323:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(33),l=t.n(r),i=(t(147),t(22)),o=t(4),s=t(46),u=t.n(s);t(148);function m(){return c.a.createElement("div",{className:"Home"},c.a.createElement("img",{src:u.a,alt:"logo"}),c.a.createElement("h1",null,"Agilitious"),c.a.createElement("p",null,"An expeditious and nutritious estimation game"),c.a.createElement(i.b,{to:"/games/new"},c.a.createElement("button",null,"Start a new game")))}var d=t(47),p=t(7),E=t(76),v=t.n(E),b=t(126),f=t.n(b);t(168);function g(){return c.a.createElement("div",{className:"SidebarHeader"},c.a.createElement("img",{src:u.a,alt:"logo"}),c.a.createElement("h1",null,"Agilitious"))}t(169);var y=t(127),O=t.n(y),h=t(128),I=t.n(h),j=t(129),S=t.n(j),P=t(130),N=t.n(P),w=t(131),M=t.n(w),C=t(132),k=t.n(C),A=t(133),x=t.n(A),D=[O.a,I.a,S.a,N.a,M.a,k.a,x.a],_=["Michael Scott","Dwight Schrute","Jim Halpert","Pam Beesly","Andy Bernard"];function J(e){return c.a.createElement("div",{className:"Players"},c.a.createElement("header",null,"Players"),e.players.map((function(a,t){return c.a.createElement("div",{className:"Player ".concat(a.id===e.activePlayerId?"is-active":""),key:a.id},c.a.createElement("img",{src:D[t],alt:"avatar"}),c.a.createElement("span",null,_[t]))})))}t(170);function T(e){return c.a.createElement("div",{className:"GameActions"},c.a.createElement("button",{onClick:e.onMovePass},"Looks good"),c.a.createElement("button",{onClick:e.onMoveSave},"Save move"))}t(171);function U(e){return c.a.createElement("div",{className:"Sidebar"},c.a.createElement("header",{className:"sidebar-header"},c.a.createElement(g,null)),c.a.createElement("div",{className:"sidebar-main"},c.a.createElement(J,{players:e.players,activePlayerId:e.activePlayerId})),c.a.createElement("footer",{className:"sidebar-footer"},e.currentPlayerId===e.activePlayerId&&c.a.createElement(T,{onMovePass:e.onMovePass,onMoveSave:e.onMoveSave})))}var G=t(134),R=t.n(G);t(317);var H=function(e){var a=function(e){var a=e.filter((function(e){return"Epic"!==e.type})).map((function(a){var t=a.id,n=a.title;return{id:t,description:a.description,metadata:Object(d.a)(a,["id","title","description"]),tags:function(e,a){if(!e.epicId)return[];var t=a.find((function(a){return a.id===e.epicId}));return t?[{bgcolor:"#bf263c",color:"white",title:t.title}]:[]}(a,e),title:n}}));return{lanes:[1,2,3,5,8,13,21,34].map((function(e){return{id:"".concat(e),title:"".concat(e,1===e?" Point":" Points"),cards:a.filter((function(a){return a.metadata.currentPoints===e}))}}))}}(e.issues);return c.a.createElement(R.a,{data:a,cardDraggable:e.isMoveAllowed,hideCardDeleteIcon:!0,handleDragEnd:e.onCardMove,onCardClick:e.onCardClick})},L=t(23),B=t(324);t(318);v.a.setAppElement("#root");var F=Object(B.a)();function q(){var e=Object(o.g)().gameId;console.log("gameId: ".concat(e));var a=Object(n.useState)("ws://localhost:8000"),t=Object(p.a)(a,2),r=t[0],l=(t[1],Object(n.useState)([])),i=Object(p.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)([]),E=Object(p.a)(m,2),b=E[0],g=E[1],y=Object(n.useState)(),O=Object(p.a)(y,2),h=O[0],I=O[1],j=Object(n.useState)(!1),S=Object(p.a)(j,2),P=S[0],N=S[1],w=Object(n.useState)(),M=Object(p.a)(w,2),C=M[0],k=M[1],A=Object(L.a)("playerId",F),x=Object(p.a)(A,2),D=x[0],_=x[1],J=Object(L.a)("playerName",""),T=Object(p.a)(J,2),G=T[0],R=(T[1],f()(r,{onOpen:function(){D&&B({type:"JOIN_GAME",gameId:e,playerId:D})},onMessage:function(e){var a=JSON.parse(e.data),t=a.type,n=Object(d.a)(a,["type"]);switch(t){case"GAME_STATE":I(n.activePlayerId),_(n.playerId),g(n.players),u(n.issues);break;case"UPDATED_POINTS":var c=s.map((function(e){return e.id===n.issue.id?n.issue:e}));u(c);break;case"ISSUE_OPENED":var r=s.find((function(e){return e.id===n.issueId}));N(!0),k(r);break;case"ISSUE_CLOSED":N(!1),k(void 0);break;case"PLAYER_ADDED":g(n.players);break;case"MOVE_CONFIRMED":case"PLAYER_SKIPPED":I(n.activePlayerId);break;default:return}},shouldReconnect:function(e){return!0}})),B=R.sendJsonMessage;R.lastJsonMessage,R.readyState;return D&&G?c.a.createElement("div",{className:"Game"},c.a.createElement("div",{className:"game-sidebar"},c.a.createElement(U,{activePlayerId:h,currentPlayerId:D,onMovePass:function(){B({type:"NO_CHANGE",playerId:D,gameId:e})},onMoveSave:function(){B({type:"CONFIRM_MOVE",playerId:D,gameId:e})},players:b})),c.a.createElement("div",{className:"game-table"},c.a.createElement(H,{isMoveAllowed:D===h,onCardClick:function(a,t,n){B({type:"OPEN_ISSUE",playerId:D,issueId:a,gameId:e})},onCardMove:function(a,t,n,c,r){B({type:"UPDATE_POINTS",playerId:D,points:parseInt(n,10),issueId:a,gameId:e})},issues:s})),c.a.createElement(v.a,{isOpen:P,onRequestClose:function(){B({type:"CLOSE_ISSUE",playerId:D,issueId:C.id,gameId:e})}},c.a.createElement("h1",null,"Hello from modal ",C&&C.title))):c.a.createElement(o.a,{to:"/games/".concat(e,"/join")})}t(319);var V=Object(B.a)();function W(){var e=Object(B.a)(),a=Object(L.a)("playerName",""),t=Object(p.a)(a,2),n=t[0],r=t[1],l=Object(L.a)("playerId",V),o=Object(p.a)(l,2),s=o[0],u=o[1];return c.a.createElement("div",{className:"JoinGame"},c.a.createElement(g,null),c.a.createElement("form",null,c.a.createElement("label",null,"Player name"),c.a.createElement("input",{onChange:function(e){console.log("handleChange ".concat(e.target.value)),r(e.target.value),s||u(V)},type:"text",value:n})),c.a.createElement(i.b,{to:"/games/".concat(e)},c.a.createElement("button",null,"Join game")))}var Y=t(80),K=t.n(Y),$=t(141),z=(t(321),Object(B.a)());function Q(){var e=Object(B.a)(),a=Object(L.a)("playerName",""),t=Object(p.a)(a,2),r=t[0],l=t[1],o=Object(L.a)("playerId",z),s=Object(p.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(""),E=Object(p.a)(d,2),v=E[0],b=E[1],f=function(){var a=Object($.a)(K.a.mark((function a(t){return K.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("http://localhost:8000/games/".concat(e,"/issues"),{method:"PUT",headers:{"content-type":"text/plain"},body:t});case 2:a.sent;case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return c.a.createElement("div",{className:"NewGame"},c.a.createElement(g,null),c.a.createElement("form",null,c.a.createElement("label",null,"Player name"),c.a.createElement("input",{onChange:function(e){l(e.target.value)},type:"text",value:r}),c.a.createElement("label",null,"Upload Jira issues"),c.a.createElement("input",{accept:".csv",className:"custom-file-input",type:"file",onChange:function(e){var a=new FileReader;a.onload=function(e){f(e.target.result)},b(e.target.files[0].name),a.readAsText(e.target.files[0]),u||m(z)}}),v&&c.a.createElement("span",{className:"file-upload-name"},v)),c.a.createElement(i.b,{to:"/games/".concat(e)},c.a.createElement("button",null,"Start a new game")),c.a.createElement("p",null,"Share this game with your teammates:"),c.a.createElement("p",null,"https://www.agilitious.app/games/".concat(e)))}t(322);var X=function(){return c.a.createElement(i.a,null,c.a.createElement(o.d,null,c.a.createElement(o.b,{path:"/games/new"},c.a.createElement(Q,null)),c.a.createElement(o.b,{path:"/games/:gameId/join"},c.a.createElement(W,null)),c.a.createElement(o.b,{path:"/games/:gameId"},c.a.createElement(q,null)),c.a.createElement(o.b,{path:"/"},c.a.createElement(m,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},46:function(e,a,t){e.exports=t.p+"static/media/deer-black.6a6cc074.svg"}},[[142,1,2]]]);
//# sourceMappingURL=main.f0d6d8e0.chunk.js.map