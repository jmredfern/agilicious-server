(this["webpackJsonpagilitious-client"]=this["webpackJsonpagilitious-client"]||[]).push([[0],{126:function(e,a,t){e.exports=t.p+"static/media/bird.87ace9d5.svg"},127:function(e,a,t){e.exports=t.p+"static/media/bird-2.2a95e580.svg"},128:function(e,a,t){e.exports=t.p+"static/media/chicken.c04ddbb9.svg"},129:function(e,a,t){e.exports=t.p+"static/media/fox.c66a825a.svg"},130:function(e,a,t){e.exports=t.p+"static/media/hedgehog.0b7b275b.svg"},131:function(e,a,t){e.exports=t.p+"static/media/rabbit.fd0a14cc.svg"},132:function(e,a,t){e.exports=t.p+"static/media/squirrel.57ea8deb.svg"},140:function(e,a,t){e.exports=t(320)},145:function(e,a,t){},146:function(e,a,t){},166:function(e,a,t){},167:function(e,a,t){},168:function(e,a,t){},169:function(e,a,t){},315:function(e,a,t){},316:function(e,a,t){},317:function(e,a,t){},318:function(e,a,t){},319:function(e,a,t){},320:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(33),l=t.n(r),i=(t(145),t(22)),o=t(4),s=t(46),u=t.n(s);t(146);function m(){return c.a.createElement("div",{className:"Home"},c.a.createElement("img",{src:u.a,alt:"logo"}),c.a.createElement("h1",null,"Agilitious"),c.a.createElement("p",null,"An expeditious and nutritious estimation game"),c.a.createElement(i.b,{to:"/games/new"},c.a.createElement("button",null,"Start a new game")))}var d=t(47),p=t(9),E=t(76),v=t.n(E),b=t(125),g=t.n(b);t(166);function f(){return c.a.createElement("div",{className:"SidebarHeader"},c.a.createElement("img",{src:u.a,alt:"logo"}),c.a.createElement("h1",null,"Agilitious"))}t(167);var y=t(126),I=t.n(y),O=t(127),h=t.n(O),S=t(128),j=t.n(S),P=t(129),N=t.n(P),w=t(130),M=t.n(w),C=t(131),k=t.n(C),A=t(132),D=t.n(A),x=[I.a,h.a,j.a,N.a,M.a,k.a,D.a],_=["Michael Scott","Dwight Schrute","Jim Halpert","Pam Beesly","Andy Bernard"];function J(e){return c.a.createElement("div",{className:"Players"},c.a.createElement("header",null,"Players"),e.players.map((function(a,t){return c.a.createElement("div",{className:"Player ".concat(a.id===e.activePlayerId?"is-active":""),key:a.id},c.a.createElement("img",{src:x[t],alt:"avatar"}),c.a.createElement("span",null,_[t]))})))}t(168);function G(e){return c.a.createElement("div",{className:"GameActions"},c.a.createElement("button",{onClick:e.onMovePass},"Looks good"),c.a.createElement("button",{onClick:e.onMoveSave},"Save move"))}t(169);function U(e){return c.a.createElement("div",{className:"Sidebar"},c.a.createElement("header",{className:"sidebar-header"},c.a.createElement(f,null)),c.a.createElement("div",{className:"sidebar-main"},c.a.createElement(J,{players:e.players,activePlayerId:e.activePlayerId})),c.a.createElement("footer",{className:"sidebar-footer"},e.currentPlayerId===e.activePlayerId&&c.a.createElement(G,{onMovePass:e.onMovePass,onMoveSave:e.onMoveSave})))}var R=t(133),T=t.n(R);t(315);var H=function(e){var a=function(e){var a=e.filter((function(e){return"Epic"!==e.type})).map((function(a){var t=a.id,n=a.title;return{id:t,description:a.description,metadata:Object(d.a)(a,["id","title","description"]),tags:function(e,a){if(!e.epicId)return[];var t=a.find((function(a){return a.id===e.epicId}));return t?[{bgcolor:"#bf263c",color:"white",title:t.title}]:[]}(a,e),title:n}}));return{lanes:[1,2,3,5,8,13,21,34].map((function(e){return{id:"".concat(e),title:"".concat(e,1===e?" Point":" Points"),cards:a.filter((function(a){return a.metadata.currentPoints===e}))}}))}}(e.issues);return c.a.createElement(T.a,{data:a,cardDraggable:e.isMoveAllowed,hideCardDeleteIcon:!0,handleDragEnd:e.onCardMove,onCardClick:e.onCardClick})},L=t(23),B=t(321);t(316);v.a.setAppElement("#root");var F=Object(B.a)();function q(){var e=Object(o.g)().gameId;console.log("gameId: ".concat(e));var a=Object(n.useState)("ws://localhost:8000"),t=Object(p.a)(a,2),r=t[0],l=(t[1],Object(n.useState)([])),i=Object(p.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)([]),E=Object(p.a)(m,2),b=E[0],f=E[1],y=Object(n.useState)(),I=Object(p.a)(y,2),O=I[0],h=I[1],S=Object(n.useState)(!1),j=Object(p.a)(S,2),P=j[0],N=j[1],w=Object(n.useState)(),M=Object(p.a)(w,2),C=M[0],k=M[1],A=Object(L.a)("playerId",F),D=Object(p.a)(A,2),x=D[0],_=D[1],J=Object(L.a)("playerName",""),G=Object(p.a)(J,2),R=G[0],T=(G[1],g()(r,{onOpen:function(){x&&B({type:"JOIN_GAME",gameId:e,playerId:x})},onMessage:function(e){var a=JSON.parse(e.data),t=a.type,n=Object(d.a)(a,["type"]);switch(t){case"GAME_STATE":h(n.activePlayerId),_(n.playerId),f(n.players),u(n.issues);break;case"UPDATED_POINTS":var c=s.map((function(e){return e.id===n.issue.id?n.issue:e}));u(c);break;case"ISSUE_OPENED":var r=s.find((function(e){return e.id===n.issueId}));N(!0),k(r);break;case"ISSUE_CLOSED":N(!1),k(void 0);break;case"PLAYER_ADDED":f(n.players);break;case"MOVE_CONFIRMED":case"PLAYER_SKIPPED":h(n.activePlayerId);break;default:return}},shouldReconnect:function(e){return!0}})),B=T.sendJsonMessage;T.lastJsonMessage,T.readyState;return x&&R?c.a.createElement("div",{className:"Game"},c.a.createElement("div",{className:"game-sidebar"},c.a.createElement(U,{activePlayerId:O,currentPlayerId:x,onMovePass:function(){B({type:"NO_CHANGE",playerId:x,gameId:e})},onMoveSave:function(){B({type:"CONFIRM_MOVE",playerId:x,gameId:e})},players:b})),c.a.createElement("div",{className:"game-table"},c.a.createElement(H,{isMoveAllowed:x===O,onCardClick:function(a,t,n){B({type:"OPEN_ISSUE",playerId:x,issueId:a,gameId:e})},onCardMove:function(a,t,n,c,r){B({type:"UPDATE_POINTS",playerId:x,points:parseInt(n,10),issueId:a,gameId:e})},issues:s})),c.a.createElement(v.a,{isOpen:P,onRequestClose:function(){B({type:"CLOSE_ISSUE",playerId:x,issueId:C.id,gameId:e})}},c.a.createElement("h1",null,"Hello from modal ",C&&C.title))):c.a.createElement(o.a,{to:"/games/".concat(e,"/join")})}t(317);var V=Object(B.a)();function W(){var e=Object(B.a)(),a=Object(L.a)("playerName",""),t=Object(p.a)(a,2),n=t[0],r=t[1],l=Object(L.a)("playerId",V),o=Object(p.a)(l,2),s=o[0],u=o[1];return c.a.createElement("div",{className:"JoinGame"},c.a.createElement(f,null),c.a.createElement("form",null,c.a.createElement("label",null,"Player name"),c.a.createElement("input",{onChange:function(e){console.log("handleChange ".concat(e.target.value)),r(e.target.value),s||u(V)},type:"text",value:n})),c.a.createElement(i.b,{to:"/games/".concat(e)},c.a.createElement("button",null,"Join game")))}t(318);var Y=Object(B.a)();function K(){var e=Object(B.a)(),a=Object(L.a)("playerName",""),t=Object(p.a)(a,2),n=t[0],r=t[1],l=Object(L.a)("playerId",Y),o=Object(p.a)(l,2),s=o[0],u=o[1];return c.a.createElement("div",{className:"NewGame"},c.a.createElement(f,null),c.a.createElement("form",null,c.a.createElement("label",null,"Player name"),c.a.createElement("input",{onChange:function(e){console.log("handleChange ".concat(e.target.value)),r(e.target.value)},type:"text",value:n}),c.a.createElement("label",null,"Upload Jira issues"),c.a.createElement("input",{accept:".csv",className:"custom-file-input",type:"file",onChange:function(e){(new FormData).append("file",e.target.files[0]),s||u(Y)}})),c.a.createElement(i.b,{to:"/games/".concat(e)},c.a.createElement("button",null,"Start a new game")),c.a.createElement("p",null,"Share this game with your teammates:"),c.a.createElement("p",null,"https://www.agilitious.app/games/".concat(e)))}t(319);var $=function(){return c.a.createElement(i.a,null,c.a.createElement(o.d,null,c.a.createElement(o.b,{path:"/games/new"},c.a.createElement(K,null)),c.a.createElement(o.b,{path:"/games/:gameId/join"},c.a.createElement(W,null)),c.a.createElement(o.b,{path:"/games/:gameId"},c.a.createElement(q,null)),c.a.createElement(o.b,{path:"/"},c.a.createElement(m,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},46:function(e,a,t){e.exports=t.p+"static/media/deer-black.6a6cc074.svg"}},[[140,1,2]]]);
//# sourceMappingURL=main.eae8a411.chunk.js.map