(this["webpackJsonpagilitious-client"]=this["webpackJsonpagilitious-client"]||[]).push([[0],{127:function(e,a,t){e.exports=t.p+"static/media/bird.87ace9d5.svg"},128:function(e,a,t){e.exports=t.p+"static/media/bird-2.2a95e580.svg"},129:function(e,a,t){e.exports=t.p+"static/media/chicken.c04ddbb9.svg"},130:function(e,a,t){e.exports=t.p+"static/media/fox.c66a825a.svg"},131:function(e,a,t){e.exports=t.p+"static/media/hedgehog.0b7b275b.svg"},132:function(e,a,t){e.exports=t.p+"static/media/rabbit.fd0a14cc.svg"},133:function(e,a,t){e.exports=t.p+"static/media/squirrel.57ea8deb.svg"},142:function(e,a,t){e.exports=t(323)},147:function(e,a,t){},148:function(e,a,t){},168:function(e,a,t){},169:function(e,a,t){},170:function(e,a,t){},171:function(e,a,t){},317:function(e,a,t){},318:function(e,a,t){},319:function(e,a,t){},321:function(e,a,t){},322:function(e,a,t){},323:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(33),l=t.n(r),i=(t(147),t(22)),o=t(4),s=t(46),u=t.n(s);t(148);function m(){return c.a.createElement("div",{className:"Home"},c.a.createElement("img",{src:u.a,alt:"logo"}),c.a.createElement("h1",null,"Agilitious"),c.a.createElement("p",null,"An expeditious and nutritious estimation game"),c.a.createElement(i.b,{to:"/games/new"},c.a.createElement("button",null,"Start a new game")))}var d=t(47),p=t(7),E=t(76),v=t.n(E),b=t(126),f=t.n(b);t(168);function g(){return c.a.createElement("div",{className:"SidebarHeader"},c.a.createElement("img",{src:u.a,alt:"logo"}),c.a.createElement("h1",null,"Agilitious"))}t(169);var y=t(127),O=t.n(y),I=t(128),h=t.n(I),j=t(129),S=t.n(j),P=t(130),N=t.n(P),w=t(131),M=t.n(w),C=t(132),k=t.n(C),x=t(133),A=t.n(x),D=[O.a,h.a,S.a,N.a,M.a,k.a,A.a];function _(e){return c.a.createElement("div",{className:"Players"},c.a.createElement("header",null,"Players"),e.players.map((function(a,t){return c.a.createElement("div",{className:"Player ".concat(a.id===e.activePlayerId?"is-active":""),key:a.id},c.a.createElement("img",{src:D[t],alt:"avatar"}),c.a.createElement("span",null,a.name))})))}t(170);function J(e){return c.a.createElement("div",{className:"GameActions"},c.a.createElement("button",{onClick:e.onMovePass},"Looks good"),c.a.createElement("button",{onClick:e.onMoveSave},"Save move"))}t(171);function T(e){return c.a.createElement("div",{className:"Sidebar"},c.a.createElement("header",{className:"sidebar-header"},c.a.createElement(g,null)),c.a.createElement("div",{className:"sidebar-main"},c.a.createElement(_,{players:e.players,activePlayerId:e.activePlayerId})),c.a.createElement("footer",{className:"sidebar-footer"},e.currentPlayerId===e.activePlayerId&&c.a.createElement(J,{onMovePass:e.onMovePass,onMoveSave:e.onMoveSave})))}var U=t(134),G=t.n(U);t(317);var R=function(e){var a=function(e){var a=e.filter((function(e){return"Epic"!==e.type})).map((function(a){var t=a.id,n=a.title;return{id:t,description:a.description,metadata:Object(d.a)(a,["id","title","description"]),tags:function(e,a){if(!e.epicId)return[];var t=a.find((function(a){return a.id===e.epicId}));return t?[{bgcolor:"#bf263c",color:"white",title:t.title}]:[]}(a,e),title:n}}));return{lanes:[1,2,3,5,8,13,21,34].map((function(e){return{id:"".concat(e),title:"".concat(e,1===e?" Point":" Points"),cards:a.filter((function(a){return a.metadata.currentPoints===e}))}}))}}(e.issues);return c.a.createElement(G.a,{data:a,cardDraggable:e.isMoveAllowed,hideCardDeleteIcon:!0,handleDragEnd:e.onCardMove,onCardClick:e.onCardClick})},L=t(23),H=t(324);t(318);v.a.setAppElement("#root");var F=Object(H.a)();function q(){var e=Object(o.g)().gameId;console.log("gameId: ".concat(e));var a=Object(n.useState)("ws://".concat("www.agilitious.app")),t=Object(p.a)(a,2),r=t[0],l=(t[1],Object(n.useState)([])),i=Object(p.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)([]),E=Object(p.a)(m,2),b=E[0],g=E[1],y=Object(n.useState)(),O=Object(p.a)(y,2),I=O[0],h=O[1],j=Object(n.useState)(!1),S=Object(p.a)(j,2),P=S[0],N=S[1],w=Object(n.useState)(),M=Object(p.a)(w,2),C=M[0],k=M[1],x=Object(L.a)("playerId",F),A=Object(p.a)(x,2),D=A[0],_=A[1],J=Object(L.a)("playerName",""),U=Object(p.a)(J,2),G=U[0],H=(U[1],f()(r,{onOpen:function(){D&&q({type:"JOIN_GAME",gameId:e,playerId:D,name:G})},onMessage:function(e){var a=JSON.parse(e.data),t=a.type,n=Object(d.a)(a,["type"]);switch(t){case"GAME_STATE":h(n.activePlayerId),_(n.playerId),g(n.players),u(n.issues);break;case"UPDATED_POINTS":var c=s.map((function(e){return e.id===n.issue.id?n.issue:e}));u(c);break;case"ISSUE_OPENED":var r=s.find((function(e){return e.id===n.issueId}));N(!0),k(r);break;case"ISSUE_CLOSED":N(!1),k(void 0);break;case"PLAYER_ADDED":g(n.players);break;case"MOVE_CONFIRMED":case"PLAYER_SKIPPED":h(n.activePlayerId);break;default:return}},shouldReconnect:function(e){return!0}})),q=H.sendJsonMessage;H.lastJsonMessage,H.readyState;return D&&G?c.a.createElement("div",{className:"Game"},c.a.createElement("div",{className:"game-sidebar"},c.a.createElement(T,{activePlayerId:I,currentPlayerId:D,onMovePass:function(){q({type:"NO_CHANGE",playerId:D,gameId:e})},onMoveSave:function(){q({type:"CONFIRM_MOVE",playerId:D,gameId:e})},players:b})),c.a.createElement("div",{className:"game-table"},c.a.createElement(R,{isMoveAllowed:D===I,onCardClick:function(a,t,n){q({type:"OPEN_ISSUE",playerId:D,issueId:a,gameId:e})},onCardMove:function(a,t,n,c,r){q({type:"UPDATE_POINTS",playerId:D,points:parseInt(n,10),issueId:a,gameId:e})},issues:s})),c.a.createElement(v.a,{isOpen:P,onRequestClose:function(){q({type:"CLOSE_ISSUE",playerId:D,issueId:C.id,gameId:e})}},c.a.createElement("h1",null,"Hello from modal ",C&&C.title))):c.a.createElement(o.a,{to:"/games/".concat(e,"/join")})}t(319);var B=Object(H.a)();function V(){var e=Object(o.g)().gameId,a=Object(L.a)("playerName",""),t=Object(p.a)(a,2),n=t[0],r=t[1],l=Object(L.a)("playerId",B),s=Object(p.a)(l,2),u=s[0],m=s[1];return c.a.createElement("div",{className:"JoinGame"},c.a.createElement(g,null),c.a.createElement("form",null,c.a.createElement("label",null,"Player name"),c.a.createElement("input",{onChange:function(e){console.log("handleChange ".concat(e.target.value)),r(e.target.value),u||m(B)},type:"text",value:n})),c.a.createElement(i.b,{to:"/games/".concat(e)},c.a.createElement("button",null,"Join game")))}var W=t(80),Y=t.n(W),K=t(141),$=(t(321),Object(H.a)()),z=Object(H.a)();function Q(){var e=Object(L.a)("playerName",""),a=Object(p.a)(e,2),t=a[0],r=a[1],l=Object(L.a)("playerId",z),o=Object(p.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(""),d=Object(p.a)(m,2),E=d[0],v=d[1],b="".concat("https","://").concat("www.agilitious.app"),f=function(){var e=Object(K.a)(Y.a.mark((function e(a){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/api/games/").concat($,"/issues"),{method:"PUT",headers:{"content-type":"text/plain"},body:a});case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"NewGame"},c.a.createElement(g,null),c.a.createElement("form",null,c.a.createElement("label",null,"Player name"),c.a.createElement("input",{onChange:function(e){r(e.target.value)},type:"text",value:t}),c.a.createElement("label",null,"Upload Jira issues"),c.a.createElement("input",{accept:".csv",className:"custom-file-input",type:"file",onChange:function(e){var a=new FileReader;a.onload=function(e){f(e.target.result)},v(e.target.files[0].name),a.readAsText(e.target.files[0]),s||u(z)}}),E&&c.a.createElement("span",{className:"file-upload-name"},E)),c.a.createElement(i.b,{to:"/games/".concat($)},c.a.createElement("button",null,"Start a new game")),c.a.createElement("p",null,"Share this game with your teammates:"),c.a.createElement("p",null,"".concat(b,"/games/").concat($)))}t(322);var X=function(){return c.a.createElement(i.a,null,c.a.createElement(o.d,null,c.a.createElement(o.b,{path:"/games/new"},c.a.createElement(Q,null)),c.a.createElement(o.b,{path:"/games/:gameId/join"},c.a.createElement(V,null)),c.a.createElement(o.b,{path:"/games/:gameId"},c.a.createElement(q,null)),c.a.createElement(o.b,{path:"/"},c.a.createElement(m,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},46:function(e,a,t){e.exports=t.p+"static/media/deer-black.6a6cc074.svg"}},[[142,1,2]]]);
//# sourceMappingURL=main.f8f5fe17.chunk.js.map